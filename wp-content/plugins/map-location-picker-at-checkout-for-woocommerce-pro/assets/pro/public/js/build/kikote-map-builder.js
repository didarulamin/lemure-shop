!function(){function o(o){var t=void 0===o?{disableAutoPan:!0}:o;return new google.maps.InfoWindow(t)}function t(t,n){Object.keys(n).forEach((function(e){var a=n[e],i=a.store_cords_text.split(","),l=i[0],s=i[1],p={lat:parseFloat(l),lng:parseFloat(s)},r={clickable:!1,icon:"undefined"!=typeof lpac_pro_js&&lpac_pro_js.is_pro?a.store_icon_text:"",position:p,map:t},c={content:a.store_name_text,disableAutoPan:!0},g=function(o){var t=void 0===o?{}:o;return new google.maps.Marker(t)}(r);o(c).open(t,g)}))}function n(t,n,e){wp.ajax.post("lpac_get_shipping_regions_for_shortcode",{mapID:n}).done((function(n){"string"==typeof n?console.log(n):function(t,n,e){if(null==t)return void console.log("LPAC: No regions returned. Returning...");t.forEach((function(t){var a;new google.maps.Polygon({paths:t.polygon,strokeColor:t.bgColor,strokeOpacity:.8,strokeWeight:2,fillColor:t.bgColor,fillOpacity:.35,clickable:!1}).setMap(n);for(var i,l=new google.maps.LatLngBounds,s=0;s<t.polygon.length;s++)l.extend(t.polygon[s]);var p=null!==(i=null===(a=e.shipping_settings)||void 0===a?void 0:a.shipping_regions_settings)&&void 0!==i?i:"";if(p){var r=o();p.display_region_name;var c="on"===p.display_region_price?"<p style='margin: 5px 0 0 0;'>".concat(e.shop_currency).concat(parseFloat(t.cost).toFixed(2),"</p>"):"",g="on"===p.display_region_name?"<p style='margin: 0;'>".concat(t.name,"</p>"):"";r.setContent('<div class="lpac-shipping-region-infowindow" style="font-weight: 800; text-align: center; margin: 0 !important; font-size: 14px"> '.concat(g," ").concat(c," </div>")),r.setPosition(l.getCenter()),r.open(n)}}))}(n,t,e)})).fail((function(o){console.log(o.responseJSON.data)}))}function e(o){var e,a,i,l,s=JSON.parse(o.dataset.mapSettings),p=s.display_settings.default_coordinates,r={lat:parseFloat(p.latitude),lng:parseFloat(p.longitude)},c={streetViewControl:!!s.display_settings.streetview_control,clickableIcons:!!s.display_settings.clickable_icons,backgroundColor:null!==(e=s.display_settings.background_color)&&void 0!==e?e:"",mapId:null!==(a=s.display_settings.google_map_id)&&void 0!==a?a:"",mapTypeId:null!==(i=s.display_settings.map_type)&&void 0!==i?i:"",center:r,zoom:parseInt(s.display_settings.zoom)},g=o.dataset.mapId,d=function(o,t){var n=void 0===o?{center:{lat:mapOptions.lpac_map_default_latitude,lng:mapOptions.lpac_map_default_longitude},zoom:mapOptions.lpac_map_zoom_level,streetViewControl:!1,clickableIcons:mapOptions.lpac_map_clickable_icons,backgroundColor:mapOptions.lpac_map_background_color}:o,e=void 0===t?"":t;e=e||"lpac-map";var a=document.querySelector(".".concat(e));if(a)return new google.maps.Map(a,n)}(c,"kikote-shortcode-map[data-map-id='".concat(g,"']"));n(d,g,s),t(d,null!==(l=s.shipping_settings.store_locations)&&void 0!==l?l:{})}jQuery,document.querySelectorAll(".kikote-shortcode-map").forEach(e)}();