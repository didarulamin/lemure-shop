!function(){function t(t){var e=void 0===t?{disableAutoPan:!0}:t;return new google.maps.InfoWindow(e)}function e(e){wp.ajax.post("lpac_get_saved_shipping_regions",{}).done((function(o){"string"==typeof o?console.log(o):function(e,o){if(null==e)return void console.log("LPAC: No regions returned. Returning...");e.forEach((function(e){var n=new google.maps.Polygon({paths:e.polygon,strokeColor:e.bgColor?e.bgColor:lpac_pro_js.shippingRegions.regionsDefaultBgColor,strokeOpacity:.8,strokeWeight:2,fillColor:e.bgColor?e.bgColor:lpac_pro_js.shippingRegions.regionsDefaultBgColor,fillOpacity:lpac_pro_js.shippingRegions.regionsBgFillOpacity,clickable:!1});n.setMap(o);var a=!1;if("undefined"!=typeof lpacLastOrder&&lpacLastOrder){var i=new google.maps.LatLng(lpacLastOrder.latitude,lpacLastOrder.longitude);a=google.maps.geometry.poly.containsLocation(i,n)}if(!a){for(var s=new google.maps.LatLngBounds,l=0;l<e.polygon.length;l++)s.extend(e.polygon[l]);var p=t();if(lpac_pro_js.shippingRegions.showShippingRegionsCost||lpac_pro_js.shippingRegions.showShippingRegionsLabel){var r=lpac_pro_js.shippingRegions.showShippingRegionsCost?"<p style='margin: 5px 0 0 0;'>".concat(lpac_pro_js.shippingRegions.shopCurrency).concat(parseFloat(e.cost).toFixed(2),"</p>"):"",c=lpac_pro_js.shippingRegions.showShippingRegionsLabel?"<p style='margin: 0;'>".concat(e.name,"</p>"):"";p.setContent('<div class="lpac-shipping-region-infowindow" style="font-weight: 800; text-align: center; margin: 0 !important; font-size: 14px"> '.concat(c," ").concat(r," </div>")),p.setPosition(s.getCenter()),p.open(o),o.setCenter(s.getCenter())}}})),window.lpacRegionsPlottingComplete=!0}(o,e)})).fail((function(t){console.log(t)}))}var o;(o=jQuery)(document).ready((function(){var t,n,a,i=window.lpac_map,s=window.lpac_marker,l=window.lpac_infowindow;function p(t){return void 0!==t&&"null"!==t&&null!==t}function r(t){t.preventDefault();var e=t.target.dataset.addressDetails;if(!1!==p(e)){for(var n in e=JSON.parse(e)){var a=document.querySelector("#".concat(n));if(!1!==p(a)){a.value=e[n];var r=a.name;-1===r.indexOf("country")&&-1===r.indexOf("state")||a.dispatchEvent(new Event("change",{bubbles:!0}))}}if(!1!==p(e.latitude)&&!1!==p(e.longitude)){var c={lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)},g=e.address_name,d=e.shipping_address_1?e.shipping_address_1:e.billing_address_1,u='<p style="text-align: center">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'.concat(g,"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<em>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t").concat(d,"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</em>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</p>");s.setPosition(c),l.setContent(u),l.open(i,s),i.setCenter(c),i.panTo(c),i.setZoom(16),document.querySelector("#lpac_latitude").value=e.latitude,document.querySelector("#lpac_longitude").value=e.longitude,o(document.body).trigger("update_checkout")}}document.querySelector("#lpac_places_autocomplete").value=0}!function(){if(!1!==lpac_pro_js.places_autocomplete_enabled&&!1!==lpac_pro_js.places_autocomplete_searchbox_on_map){var t=document.querySelector("#lpac-map-searchbox"),e=window.lpac_map;e.controls[google.maps.ControlPosition.TOP_CENTER].push(t),google.maps.event.addListenerOnce(e,"tilesloaded",(function(){t.style.display="block"}))}}(),lpac_pro_js.shippingRegions.enabled&&lpac_pro_js.shippingRegions.showShippingRegions&&e(i),t=document.querySelector("#lpac_save_address_checkbox"),n=document.querySelector("#lpac_saved_address_name_field"),!1!==p(t)&&t.addEventListener("change",(function(){n.classList.toggle("hidden")})),void 0!==(a=document.querySelectorAll(".lpac-saved-address-btn"))&&"null"!==a&&a.forEach((function(t){t.addEventListener("click",r)}))}))}();